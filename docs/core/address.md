# 🌐 Address 模块

`Address` 模块是 HTTP 服务器的网络地址管理核心，负责封装客户端连接的 IP 地址、端口及文件描述符（fd），提供便捷的地址转换和比较功能，简化网络通信中的地址操作。

## ✨ 模块职责

- **地址封装**：统一管理客户端连接的 IP、端口及文件描述符，支持从字符串或 `sockaddr_in` 结构体构造对象。
- **格式转换**：将二进制 IP 地址转换为可读字符串，支持 `IPv4` 地址的标准化输出。
- **数据访问**：提供 IP、端口、fd 的只读访问接口，保障数据安全性。
- **逻辑比较**：重载 `==` 和 `!=` 操作符，支持地址对象的直接对比。

## 📌 核心特性

- **多源构造支持**：支持从字符串（`"192.168.1.1:8080"`）或系统结构体（`sockaddr_in`）初始化地址对象。
- **轻量级封装**：仅存储必要信息（IP、端口、fd），无额外依赖或复杂状态管理。
- **线程安全设计**：纯数据类设计，天然支持多线程环境下的并发访问。
- **调试友好**：通过 `toString()` 生成标准格式字符串（`IP:Port`），便于日志记录。

## 📁 成员组成

| 类型/名称 | 描述 |
| ---- | ---- |
| `std::string ip_` | 客户端 IP 地址字符串（如 `"192.168.1.1"`）。 |
| `uint16_t port_` | 客户端端口号（如 `8080`）。 |
| `int fd_` | 客户端连接的文件描述符（fd），用于唯一标识 TCP 连接。 |

## ⚙️ 方法概览

| 方法名称 | 功能描述 |
| ---- | ---- |
| `ip()` | 返回客户端 IP 地址字符串。 |
| `port()` | 返回客户端端口号。 |
| `fd()` | 返回客户端连接的文件描述符（fd）。 |
| `toString()` | 生成标准格式的地址字符串（`IP:Port`），用于日志或调试。 |
| `operator==` / `operator!=` | 比较两个 `Address` 对象是否相同（IP 和端口一致即视为相等，忽略 fd）。 |

## 🔄 工作流程

1. **对象构造**
   - 通过 `Address("192.168.1.1", 8080)` 或 `Address(sockaddr_in)` 创建实例。
   - 若使用 `sockaddr_in`，自动转换二进制 IP 为字符串格式。
2. **数据访问**
   - 调用 `ip()`、`port()`、`fd()` 获取客户端连接的详细信息。
3. **地址格式化**
   - 调用 `toString()` 生成 `IP:Port` 格式字符串（如 `"127.0.0.1:8080"`）。
4. **地址比较**
   - 使用 `==` 或 `!=` 判断两个地址的 IP 和端口是否一致，用于去重或状态管理。

## 🔑 关键设计

- **二进制转字符串优化**：通过 `inet_ntop` 高效转换 `sockaddr_in` 中的二进制 IP。
- **fd 独立性设计**：比较操作符忽略文件描述符，仅关注网络地址的语义一致性。
- **异常安全保证**：纯数据操作无动态资源分配，避免内存泄漏或异常崩溃。
